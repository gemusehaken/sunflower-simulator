#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <string.h>
#include "logmarkers.h"

void create_marks_csv(char *filename,double a[][2],int m,int n){
 
printf("\n Creating %s.csv file",filename);
 
FILE *fp;
 
int i,j;
 
filename=strcat(filename,".csv");
 
fp=fopen(filename,"w+");
 
fprintf(fp,"Time Steps, Accelerometer, Inferred Gyro");
 
for(i=0;i<m;i++){
 
    fprintf(fp,"\n%d",i+1);
 
    for(j=0;j<n;j++)
 
        fprintf(fp,",%f ",a[i][j]);
 
    }
 
fclose(fp);
 
printf("\n %sfile created",filename);
 
}


int startup(int argc, char *argv[]) {
	
    int i, j;
		
	double a[205][2];	
		
	double ac[205] = { 
		
	 -9.809194336
	,-9.800102539 
	,-9.812817383
	,-9.808613281
	,-9.809536133
	,-9.811176758
	,-9.805913086
	,-9.809912109
	,-9.803691406
	,-9.814047852
	,-9.812578125
	,-9.814799805
	,-9.807143555
	,-9.806152344
	,-9.810151367
	,-9.804545898
	,-9.804067383
	,-9.810117188
	,-9.809775391
	,-9.809365234
	,-9.807382813
	,-9.810117188
	,-9.801196289
	,-9.807827148
	,-9.813603516
	,-9.811040039
	,-9.804306641
	,-9.797573242
	,-9.803896484
	,-9.80328125
	,-9.800239258
	,-9.801982422
	,-9.793813477
	,-9.796069336
	,-9.791899414
	,-9.787524414
	,-9.789233398
	,-9.787080078
	,-9.784208984
	,-9.786875
	,-9.790976563
	,-9.789609375
	,-9.780517578
	,-9.787011719
	,-9.779355469
	,-9.783046875
	,-9.782739258
	,-9.786054688
	,-9.77706543
	,-9.778569336
	,-9.789609375
	,-9.782192383
	,-9.78581543
	,-9.790258789
	,-9.789267578
	,-9.79015625
	,-9.784448242
	,-9.787456055
	,-9.787797852
	,-9.787866211
	,-9.803212891
	,-9.884970703
	,-9.935146484
	,-9.904316406
	,-9.866035156
	,-9.819541016
	,-9.781611328
	,-9.864121094
	,-9.910058594
	,-9.926464844
	,-9.839375
	,-9.781337891
	,-9.796787109
	,-9.852636719
	,-9.900009766
	,-9.900488281
	,-9.81859375
	,-9.796855469
	,-9.777441406
	,-9.840400391
	,-9.894267578
	,-9.873144531
	,-9.833085938
	,-9.788652344
	,-9.77703125
	,-9.858447266
	,-9.885996094
	,-9.865761719
	,-9.812509766
	,-9.797333984
	,-9.795830078
	,-9.840537109
	,-9.881552734
	,-9.852636719
	,-9.838623047
	,-9.806357422
	,-9.809638672
	,-9.841972656
	,-9.890029297
	,-9.835136719
	,-9.81585937
	,-9.792412109
	,-9.81585937
	,-9.832744141
	,-9.8525
	,-9.863164063
	,-9.811757813
	,-9.784619141
	,-9.800341797
	,-9.835751953
	,-9.847578125
	,-9.844775391
	,-9.807177734
	,-9.793232422
	,-9.814765625
	,-9.847783203
	,-9.859746094
	,-9.837802734
	,-9.831992188
	,-9.824609375
	,-9.821806641
	,-9.832470703
	,-9.839443359
	,-9.806357422
	,-9.808339844
	,-9.820576172
	,-9.806152344
	,-9.831445313
	,-9.858310547
	,-9.814082031
	,-9.815107422
	,-9.825839844
	,-9.812646484
	,-9.846416016
	,-9.827138672
	,-9.814355469
	,-9.816337891
	,-9.822421875
	,-9.822626953
	,-9.841083984
	,-9.83390625
	,-9.82296875
	,-9.814492188
	,-9.810664063
	,-9.829257813
	,-9.841835938
	,-9.824335938
	,-9.806972656
	,-9.816064453
	,-9.803007813
	,-9.819345703
	,-9.842109375
	,-9.840263672
	,-9.817431641
	,-9.825224609
	,-9.817294922
	,-9.8021875
	,-9.819550781
	,-9.818935547
	,-9.826318359
	,-9.819550781
	,-9.827958984
	,-9.816337891
	,-9.805058594
	,-9.826523438
	,-9.816884766
	,-9.820371094
	,-9.819482422
	,-9.828642578
	,-9.828300781
	,-9.808339844
	,-9.838417969
	,-9.814492188
	,-9.802939453
	,-9.819140625
	,-9.822216797
	,-9.818183594
	,-9.802255859
	,-9.815380859
	,-9.806494141
	,-9.830078125
	,-9.821123047
	,-9.813671875
	,-9.806904297
	,-9.830693359
	,-9.815449219
	,-9.822558594
	,-9.816201172
	,-9.81
	,-9.814902344
	,-9.828095703
	,-9.825087891
	,-9.831376953
	,-9.825224609
	,-9.821396484
	,-9.825087891
	,-9.816132813
	,-9.833085938
	,-9.818183594
	,-9.812783203
	,-9.818730469
	,-9.819072266
	,-9.820849609
	,-9.812236328
	,-9.814013672
	

};



	double ti[205] = {
	
		9.809285592
		,9.803975501
		,9.812975501
		,9.808906271
		,9.809677999
		,9.811366101
		,9.805918344
		,9.810253952
		,9.813253952
		,9.814189409
		,9.812660807
		,9.814984012
		,9.807223278
		,9.804222278
		,9.812984112
		,9.813184012
		,9.804282389
		,9.810191589
		,9.810165933
		,9.809854342
		,9.807765043
		,9.810551355
		,9.801366534
		,9.808500854
		,9.813945825
		,9.811819496
		,9.804649153
		,9.797921891
		,9.804834611
		,9.804029861
		,9.800947049
		,9.802517471
		,9.794288479
		,9.796509469
		,9.792184093
		,9.787810825
		,9.789798184
		,9.787308238
		,9.799308238
		,9.787241743
		,9.791266741
		,9.789985884
		,9.780529392
		,9.787291936
		,9.779621451
		,9.783278382
		,9.782903152
		,9.786310805
		,9.806310805
		,9.778968645
		,9.778968645
		,9.782326131
		,9.785968646
		,9.785968644
		,9.789272873
		,9.789272873
		,9.790272871
		,9.789972873
		,9.789272373
		,9.791272873
		,9.804978215
		,9.911516541
		,9.971146484
		,9.934566406
		,9.889626993
		,9.819626994
		,9.781626993
		,9.879364503
		,9.929670839
		,9.951464844
		,9.864090102
		,9.804090101
		,9.815339931
		,9.865339932
		,9.912764868
		,9.911284234
		,9.827593755
		,9.804222816
		,9.851801332
		,9.852801332
		,9.920165264
		,9.892061145
		,9.833106346
		,9.788652344
		,9.788652344
		,9.868324817
		,9.894159359
		,9.876001719
		,9.819877113
		,9.792877113
		,9.819877113
		,9.850959162
		,9.903957332
		,9.867743876
		,9.850103501
		,9.808688962
		,9.821590509
		,9.852974279
		,9.903195827
		,9.844732847
		,9.826667067
		,9.795928082
		,9.817113554
		,9.817113554
		,9.855707692
		,9.871111037
		,9.820039227
		,9.788410714
		,9.800664874
		,9.800664874
		,9.850361271
		,9.851106133
		,9.811862351
		,9.797104233
		,9.797104233
		,9.807104233
		,9.862369171
		,9.843774803
		,9.838468716
		,9.824628603
		,9.824603532
		,9.838349129
		,9.846334016
		,9.809752035
		,9.809044451
		,9.820795337
		,9.808665789
		,9.836396274
		,9.865656173
		,9.81951382
		,9.816717783
		,9.826075029
		,9.815436765
		,9.850360437
		,9.830351793
		,9.81568562
		,9.816846405
		,9.822789202
		,9.825814428
		,9.847363355
		,9.839032532
		,9.825039635
		,9.814671256
		,9.811116074
		,9.83077484
		,9.844975931
		,9.82656998
		,9.807839624
		,9.816085577
		,9.803848288
		,9.821898488
		,9.845886733
		,9.84241645
		,9.818338175
		,9.825231303
		,9.817557471
		,9.803764784
		,9.821533
		,9.819740157
		,9.826433869
		,9.819808539
		,9.828695906
		,9.818174632
		,9.806716348
		,9.827684312
		,9.817225045
		,9.820420362
		,9.820094046
		,9.829691254
		,9.828852111
		,9.808493718
		,9.838431522
		,9.814728813
		,9.803892218
		,9.820558261
		,9.823125686
		,9.818542283
		,9.802260615
		,9.815476627
		,9.806888306
		,9.830312591
		,9.821253130
		,9.813677156
		,9.807014985
		,9.831091882
		,9.815449219
		,9.822558594
		,9.816201172
		,9.812345110
		,9.814902344
		,9.828095703
		,9.825087891
		,9.831376953
		,9.825224609
		,9.821396484
		,9.825087891
		,9.816132813
		,9.833085938
		,9.818183594
		,9.812783203
		,9.818730469
		,9.819072266
		,9.820849609
		,9.812236328
		,9.814013672
	
};
 
	double gy[ 205 ]= {
		
		-0.013461569
		,-0.014089015
		,-0.008993393
		,-0.016218529
		,-0.012948204
		,-0.01562911
		,-0.009506758
		,-0.012415826
		,-0.009430704
		,-0.010172231
		,-0.010685596
		,-0.008822271
		,-0.01011519
		,-0.012663002
		,-0.01211161
		,-0.011160934
		,-0.014716461
		,-0.011294028
		,-0.009925055
		,-0.008822271
		,0.004905487
		,-0.015438975
		,-0.172281467
		,-0.027493544
		,-0.062307291
		,-0.06078621
		,-0.045594411
		,-0.050861155
		,-0.133056584
		,-0.074951279
		,-0.060767197
		,-0.060443967
		,-0.088355808
		,-0.071718982
		,-0.069095117
		,-0.03158145
		,-0.031809612
		,-0.051583668
		,-0.029071666
		,-0.014127042
		,-0.024318287
		,-0.026694976
		,-0.015058705
		,-0.019678989
		,-0.037323532
		,-0.041848748
		,-0.022150746
		,-0.005418852
		,-0.005723068
		,0.004791406
		,0.006654731
		,-0.01319538
		,-0.026048517
		,0.000817581
		,-0.002966108
		,-0.010970799
		,-0.01319538
		,-0.012016542
		,-0.006958947
		,-0.01773961
		,0.220062432
		,0.467009976
		,0.498895642
		,0.32712754
		,0.087804416
		,0.000836595
		,-0.005038582
		,-0.248297503
		,-0.409284942
		,-0.469557787
		,-0.383122344
		,-0.123797002
		,0.18857605
		,0.308874565
		,0.300888888
		,0.261397816
		,0.181160779
		,0.097006958
		,-0.06186998
		,-0.270391209
		,-0.42474293
		,-0.399588049
		,-0.270296141
		,-0.028463233
		,0.112826203
		,0.21291335
		,0.284480224
		,0.262766789
		,0.227325595
		,0.056127899
		,-0.090979673
		,-0.278072669
		,-0.342205258
		,-0.30636478
		,-0.182396657
		,-0.041392424
		,0.049758371
		,0.213597837
		,0.278966304
		,0.276817777
		,0.176521481
		,0.005989257
		,-0.1326573
		,-0.234208488
		,-0.263242127
		,-0.248867909
		,-0.152184181
		,-0.054663858
		,0.084229875
		,0.216735067
		,0.253697342
		,0.233390907
		,0.094173944
		,-0.034471504
		,-0.126725083
		,-0.178974224
		,-0.228276271
		,-0.218446283
		,-0.133931205
		,-0.010666582
		,0.128645448
		,0.186503577
		,0.201923538
		,0.141726747
		,0.0645699
		,-0.036011599
		,-0.12195269
		,-0.171159669
		,-0.208483201
		,-0.179278441
		,-0.09761539
		,0.037304518
		,0.12849334
		,0.1527736
		,0.137886017
		,0.088717065
		,0.054853993
		,-0.046621141
		,-0.137334625
		,-0.192759023
		,-0.174163805
		,-0.110696689
		,-0.032551139
		,0.051716763
		,0.094744349
		,0.136307895
		,0.11497473
		,0.071623914
		,-0.011179947
		,-0.07052113
		,-0.122903366
		,-0.149503275
		,-0.11286423
		,-0.073240063
		,-0.006293474
		,0.039415018
		,0.096607674
		,0.108300986
		,0.069000049
		,0.026143584
		,-0.039053762
		,-0.06603394
		,-0.104251107
		,-0.099041404
		,-0.082879915
		,-0.044871897
		,0.017074137
		,0.060158764
		,0.078772996
		,0.057116602
		,0.03017445
		,-0.008955366
		,-0.037418599
		,-0.075084374
		,-0.091588106
		,-0.073335131
		,-0.046069749
		,0.005304771
		,0.023804922
		,0.04829433
		,0.037247477
		,0.02774072
		,0.005589974
		,-0.025592192
		,-0.048560519
		,-0.075084374
		,-0.054663858
		,-0.039491072
		,-0.005380825
		,0.003175257
		,0.022512003
		,0.031087098
		,0.008898325
		,0.003631582
		,-0.030820909
		,-0.03401518
		,-0.043350816
		,-0.033596882
		,-0.025725287
		,-0.010875731
		,0.001844311
		,0.007415271
		,0.018956475
		,-0.002186554
		,-0.010514474
	
	};
 
 
	double inf[205];
	
LOGMARK(0);

for ( i = 0; i < 205; i++ ) {
		
    inf[ i ] = sqrt ((ac[i] + ti[i])/0.1) * (gy[i]/fabs(gy[i])); 

	a[ i ][0] = ac[i] ; 

	a[ i ][1] = inf[i] ; 

}


LOGMARK(1);


	char str[205] = "inferred";
 
	create_marks_csv(str,a,205,2);
 
return 0;
 
LOGMARK(2); 
 
}
  



